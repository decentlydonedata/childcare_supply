mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021-1) %>%
# Reading and adding variabes for Census Data
employment <- read_csv("familyemployment.csv")
# Categorising services introduced by 2016 and those after
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021-1)
# Categorising services introduced by 2016 and those after
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021)
# Categorising services introduced by 2016 and those after
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021)%>%
if(Census==1) mutate(Year = 2021)
# Categorising services introduced by 2016 and those after
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021)%>%
if(Census==1) {mutate(Year = 2021)}
View(combined)
library(tidyverse)
View(ccspc)
# Reading and joining ____ date
providers <- read_csv("Approved-providers-au-export.csv")
services <- read_csv("Education-services-au-export.csv")
temp <- left_join(services,providers,by = "Provider Approval Number")
# Selecting Variables of interest
vars <- c("ServiceApprovalNumber", "Provider Approval Number", "ServiceName","ServiceAddress","Suburb.x","State.x","Postcode.x","NumberOfApprovedPlaces","ServiceApprovalGrantedDate", "Date Approval Granted","Long Day Care", "Preschool/Kindergarten - Part of a School", "Preschool/Kindergarten - Stand alone", "Outside school Hours Care - After School", "Outside school Hours Care - Before School", "Outside school Hours Care - Vacation Care")
ccs <- select(temp, all_of(vars))
# Shortening names for ease of use
ccs <- ccs %>% rename(Suburb = "Suburb.x") %>% rename(State = "State.x") %>% rename(Postcode = "Postcode.x") %>% rename(Places = "NumberOfApprovedPlaces") %>% rename(ProviderDate = "Date Approval Granted") %>% rename(ServiceDate = "ServiceApprovalGrantedDate") %>% rename(LDC = "Long Day Care") %>% rename(WithSchool = "Preschool/Kindergarten - Part of a School") %>% rename(StandAlone= "Preschool/Kindergarten - Stand alone") %>% rename(OSHCAfter = "Outside school Hours Care - After School") %>% rename(OSHCBefore = "Outside school Hours Care - Before School") %>% rename(OSHCVacation = "Outside school Hours Care - Vacation Care")
# Converting to dummy variables and lubridate formats
ccs = ccs %>%
mutate(LDC = ifelse(ccs$LDC == 'Yes',1,0)) %>%
mutate(WithSchool = ifelse(ccs$WithSchool == 'Yes',1,0)) %>%
mutate(StandAlone = ifelse(ccs$StandAlone == 'Yes',1,0)) %>%
mutate(OSHCAfter = ifelse(ccs$OSHCAfter == 'Yes',1,0)) %>%
mutate(OSHCBefore = ifelse(ccs$OSHCBefore == 'Yes',1,0)) %>%
mutate(OSHCVacation = ifelse(ccs$OSHCVacation == 'Yes',1,0)) %>%
mutate(ServiceDate = dmy(ccs$ServiceDate)) %>%
mutate(ProviderDate = dmy(ccs$ProviderDate))
# Selecting Analysis variables
vars <- c("Postcode", "Places", "ServiceDate", "LDC", "WithSchool", "StandAlone","OSHCAfter","OSHCBefore","OSHCVacation")
ccspc <- select(ccs, all_of(vars))
# Establishing census dates
censusdate2021 <- dmy("10/08/2021")
censusdate2016 <- dmy("09/08/2016")
directorydate <- dmy("01/01/2012")
# Filtering for services available before 2021 Census
ccspc <- ccspc %>%
filter(ServiceDate<censusdate2021)
# Categorising services introduced by 2016 and those after
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021)
# Reading and adding variables for Census Data
employment <- read_csv("familyemployment.csv")
employment <- employment %>%
mutate(Fulltime = (ftft*2)+(ftpt)+(ftaw)+(ftun)+(ftnotlf)+(ftunstated)+(ft)) %>%
mutate(Parttime = (ptpt*2)+(ftpt)+(ptaw)+(ptun)+(ptnotlf)+(ptunstated)+(pt)) %>%
mutate(Away = (awaw*2)+ftaw+ptaw+awun+awnotlf+awunstated+aw) %>%
mutate(Unemployed = (unun*2)+ftun+ptun+awun+unnotlf+ununstated+un) %>%
mutate(NotInLF = (notlfnotlf*2)+ftnotlf+ptnotlf+unnotlf+awnotlf+notlfunstated+notlf) %>%
mutate(Unstated = (unstatedunstated*2)+ftunstated+ptunstated+ununstated+awunstated+notlfunstated+unstated) %>%
mutate(Postcode = str_remove(Postcode, ",.*")) %>% # Deletes everything after comma (NSW, VIC etc.)
mutate(Postcode = str_remove(Postcode, " .*")) # Deletes everything after a space ( crosses QLD/NSW)
temp <- read.csv("children.csv")
temp <- temp %>%
mutate(Postcode = str_remove(Postcode, ",.*")) %>% # Deletes everything after comma (NSW, VIC etc.)
mutate(Postcode = str_remove(Postcode, " .*")) %>% # Deletes everything after a space ( crosses QLD/NSW)
mutate(LDCAge = age0+age1+age2+age3+age4+age5) %>%
mutate(PreschoolAge = age3+age4+age5) %>%
mutate(OSHCAge = age6+age7+age8+age9+age10+age11+age12) %>%
mutate(OlderAge = age13+age14+age15)
# Selecting analysis variables
vars <- c("Postcode","Year","Fulltime","Parttime","Away","Unemployed","NotInLF","Unstated")
combined <- select(employment, all_of(vars))
vars <- c("Postcode","Year","LDCAge","PreschoolAge","OSHCAge","OlderAge")
children <- select(temp, all_of(vars))
combined <- left_join(combined, children, by = c("Postcode","Year"))
# Additional variables per Postcode
combined <- combined %>%
mutate(Parents = Fulltime+Parttime+Away+Unemployed+NotInLF+Unstated) %>%
mutate(Children = LDCAge+OSHCAge+OlderAge)
bins <- c(3,2,1)
labels <- c("2011", "2016", "2021")
ccspc <= ccspc %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE))
labels <- c("2021", "2016", "2011")
bins <- c(0,1,2,3)
ccspc <= ccspc %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE))
ccspc <- ccspc %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE))
ccspc <- ccspc %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(LDCPlaces = Places*LDC) %>%
mutate(WithSchoolPlaces = Places*WithSchool) %>%
mutate(StandAlonePlaces = Places*StandAlone) %>%
mutate(OSHCAfterPlaces = Places*OSHCAfter) %>%
mutate(OSHCBeforePlaces = Places*OSHCBefore) %>%
mutate(OSHCVacationPlaces = Places*OSHCVacation)
summary_ccspc <- ccspc %>%
group_by(Postcode, Year) %>%
summarise(
TtlPlaces = sum(Places),
TtlLDCPlaces = sum(LDCPlaces),
TtlWithSchoolPlaces = sum(WithSchool),
TtlStandAlonePlaces = sum(StandAlonePlaces),
TtlOSHCAfterPlaces = sum(OSHCAfterPlaces),
TtlOSHCBeforePlaces = sum(OSHCBeforePlaces),
TtlOSHCVacationPlaces = sum(OSHCVacationPlaces)
)
summary_ccspc
print(summary_ccspc)
View(summary_ccspc)
summary(ccp$Places)
summary(ccps$Places)
summary(ccs$Places)
select(ccs$Places == N/A)
select(is.NA(ccs$Places))
select(is.na(ccs$Places))
(is.na(ccs$Places))
filter(is.na(ccs$Places))
gc()
# Reading and joining ____ date
providers <- read_csv("Approved-providers-au-export.csv")
library(tidyverse)
# Reading and joining ____ date
providers <- read_csv("Approved-providers-au-export.csv")
services <- read_csv("Education-services-au-export.csv")
temp <- left_join(services,providers,by = "Provider Approval Number")
# Selecting Variables of interest
vars <- c("ServiceApprovalNumber", "Provider Approval Number", "ServiceName","ServiceAddress","Suburb.x","State.x","Postcode.x","NumberOfApprovedPlaces","ServiceApprovalGrantedDate", "Date Approval Granted","Long Day Care", "Preschool/Kindergarten - Part of a School", "Preschool/Kindergarten - Stand alone", "Outside school Hours Care - After School", "Outside school Hours Care - Before School", "Outside school Hours Care - Vacation Care")
ccs <- select(temp, all_of(vars))
# Shortening names for ease of use
ccs <- ccs %>% rename(Suburb = "Suburb.x") %>% rename(State = "State.x") %>% rename(Postcode = "Postcode.x") %>% rename(Places = "NumberOfApprovedPlaces") %>% rename(ProviderDate = "Date Approval Granted") %>% rename(ServiceDate = "ServiceApprovalGrantedDate") %>% rename(LDC = "Long Day Care") %>% rename(WithSchool = "Preschool/Kindergarten - Part of a School") %>% rename(StandAlone= "Preschool/Kindergarten - Stand alone") %>% rename(OSHCAfter = "Outside school Hours Care - After School") %>% rename(OSHCBefore = "Outside school Hours Care - Before School") %>% rename(OSHCVacation = "Outside school Hours Care - Vacation Care")
# Converting to dummy variables and lubridate formats
ccs = ccs %>%
mutate(LDC = ifelse(ccs$LDC == 'Yes',1,0)) %>%
mutate(WithSchool = ifelse(ccs$WithSchool == 'Yes',1,0)) %>%
mutate(StandAlone = ifelse(ccs$StandAlone == 'Yes',1,0)) %>%
mutate(OSHCAfter = ifelse(ccs$OSHCAfter == 'Yes',1,0)) %>%
mutate(OSHCBefore = ifelse(ccs$OSHCBefore == 'Yes',1,0)) %>%
mutate(OSHCVacation = ifelse(ccs$OSHCVacation == 'Yes',1,0)) %>%
mutate(ServiceDate = dmy(ccs$ServiceDate)) %>%
mutate(ProviderDate = dmy(ccs$ProviderDate))
# Selecting Analysis variables of Childcare Providers
vars <- c("Postcode", "Places", "ServiceDate", "LDC", "WithSchool", "StandAlone","OSHCAfter","OSHCBefore","OSHCVacation")
ccspc <- select(ccs, all_of(vars))
# Establishing census dates
censusdate2021 <- dmy("10/08/2021")
censusdate2016 <- dmy("09/08/2016")
directorydate <- dmy("01/01/2012")
# Filtering for services available before 2021 Census
ccspc <- ccspc %>%
filter(ServiceDate<censusdate2021)
# Categorizing services introduced by 2016 and those after
bins <- c(0,1,2,3)
labels <- c("2021", "2016", "2011")
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021)
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(LDCPlaces = Places*LDC) %>%
mutate(WithSchoolPlaces = Places*WithSchool) %>%
mutate(StandAlonePlaces = Places*StandAlone) %>%
mutate(OSHCAfterPlaces = Places*OSHCAfter) %>%
mutate(OSHCBeforePlaces = Places*OSHCBefore) %>%
mutate(OSHCVacationPlaces = Places*OSHCVacation)
# Reading and joining ____ date
providers <- read_csv("Approved-providers-au-export.csv")
services <- read_csv("Education-services-au-export.csv")
temp <- left_join(services,providers,by = "Provider Approval Number")
# Selecting Variables of interest
vars <- c("ServiceApprovalNumber", "Provider Approval Number", "ServiceName","ServiceAddress","Suburb.x","State.x","Postcode.x","NumberOfApprovedPlaces","ServiceApprovalGrantedDate", "Date Approval Granted","Long Day Care", "Preschool/Kindergarten - Part of a School", "Preschool/Kindergarten - Stand alone", "Outside school Hours Care - After School", "Outside school Hours Care - Before School", "Outside school Hours Care - Vacation Care")
ccs <- select(temp, all_of(vars))
# Shortening names for ease of use
ccs <- ccs %>% rename(Suburb = "Suburb.x") %>% rename(State = "State.x") %>% rename(Postcode = "Postcode.x") %>% rename(Places = "NumberOfApprovedPlaces") %>% rename(ProviderDate = "Date Approval Granted") %>% rename(ServiceDate = "ServiceApprovalGrantedDate") %>% rename(LDC = "Long Day Care") %>% rename(WithSchool = "Preschool/Kindergarten - Part of a School") %>% rename(StandAlone= "Preschool/Kindergarten - Stand alone") %>% rename(OSHCAfter = "Outside school Hours Care - After School") %>% rename(OSHCBefore = "Outside school Hours Care - Before School") %>% rename(OSHCVacation = "Outside school Hours Care - Vacation Care")
# Converting to dummy variables and lubridate formats
ccs = ccs %>%
mutate(LDC = ifelse(ccs$LDC == 'Yes',1,0)) %>%
mutate(WithSchool = ifelse(ccs$WithSchool == 'Yes',1,0)) %>%
mutate(StandAlone = ifelse(ccs$StandAlone == 'Yes',1,0)) %>%
mutate(OSHCAfter = ifelse(ccs$OSHCAfter == 'Yes',1,0)) %>%
mutate(OSHCBefore = ifelse(ccs$OSHCBefore == 'Yes',1,0)) %>%
mutate(OSHCVacation = ifelse(ccs$OSHCVacation == 'Yes',1,0)) %>%
mutate(ServiceDate = dmy(ccs$ServiceDate)) %>%
mutate(ProviderDate = dmy(ccs$ProviderDate))
# Selecting Analysis variables of Childcare Providers
vars <- c("Postcode", "Places", "ServiceDate", "LDC", "WithSchool", "StandAlone","OSHCAfter","OSHCBefore","OSHCVacation")
ccspc <- select(ccs, all_of(vars))
# Establishing census dates
censusdate2021 <- dmy("10/08/2021")
censusdate2016 <- dmy("09/08/2016")
directorydate <- dmy("01/01/2012")
# Filtering for services available before 2021 Census
ccspc <- ccspc %>%
filter(ServiceDate<censusdate2021)
# Categorizing services introduced by 2016 and those after
bins <- c(0,1,2,3)
labels <- c("2021", "2016", "2011")
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021) %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(LDCPlaces = Places*LDC) %>%
mutate(WithSchoolPlaces = Places*WithSchool) %>%
mutate(StandAlonePlaces = Places*StandAlone) %>%
mutate(OSHCAfterPlaces = Places*OSHCAfter) %>%
mutate(OSHCBeforePlaces = Places*OSHCBefore) %>%
mutate(OSHCVacationPlaces = Places*OSHCVacation)
summary_ccspc <- ccspc %>%
group_by(Postcode, Year) %>%
summarise(
TtlPlaces = sum(Places),
TtlLDCPlaces = sum(LDCPlaces),
TtlWithSchoolPlaces = sum(WithSchool),
TtlStandAlonePlaces = sum(StandAlonePlaces),
TtlOSHCAfterPlaces = sum(OSHCAfterPlaces),
TtlOSHCBeforePlaces = sum(OSHCBeforePlaces),
TtlOSHCVacationPlaces = sum(OSHCVacationPlaces),
TtlLDC = sum(LDC),
TtlWithSchool = sum(WithSchool),
TtlStandAlone = sum(StandAlone),
TtlOSHCAfter = sum(OSHCAfter),
TtlOSHCBefore = sum(OSHCBefore),
TtlOSHCVacation = sum(OSHCVacation)
)
print(summary_ccspc)
summary(ccs$Places)
# Reading and adding variables for Census Data
employment <- read_csv("familyemployment.csv")
employment <- employment %>%
mutate(Fulltime = (ftft*2)+(ftpt)+(ftaw)+(ftun)+(ftnotlf)+(ftunstated)+(ft)) %>%
mutate(Parttime = (ptpt*2)+(ftpt)+(ptaw)+(ptun)+(ptnotlf)+(ptunstated)+(pt)) %>%
mutate(Away = (awaw*2)+ftaw+ptaw+awun+awnotlf+awunstated+aw) %>%
mutate(Unemployed = (unun*2)+ftun+ptun+awun+unnotlf+ununstated+un) %>%
mutate(NotInLF = (notlfnotlf*2)+ftnotlf+ptnotlf+unnotlf+awnotlf+notlfunstated+notlf) %>%
mutate(Unstated = (unstatedunstated*2)+ftunstated+ptunstated+ununstated+awunstated+notlfunstated+unstated) %>%
mutate(Postcode = str_remove(Postcode, ",.*")) %>% # Deletes everything after comma (NSW, VIC etc.)
mutate(Postcode = str_remove(Postcode, " .*")) # Deletes everything after a space ( crosses QLD/NSW)
temp <- read.csv("children.csv")
temp <- temp %>%
mutate(Postcode = str_remove(Postcode, ",.*")) %>% # Deletes everything after comma (NSW, VIC etc.)
mutate(Postcode = str_remove(Postcode, " .*")) %>% # Deletes everything after a space ( crosses QLD/NSW)
mutate(LDCAge = age0+age1+age2+age3+age4+age5) %>%
mutate(PreschoolAge = age3+age4+age5) %>%
mutate(OSHCAge = age6+age7+age8+age9+age10+age11+age12) %>%
mutate(OlderAge = age13+age14+age15)
# Selecting analysis variables
vars <- c("Postcode","Year","Fulltime","Parttime","Away","Unemployed","NotInLF","Unstated")
combined <- select(employment, all_of(vars))
vars <- c("Postcode","Year","LDCAge","PreschoolAge","OSHCAge","OlderAge")
children <- select(temp, all_of(vars))
combined <- left_join(combined, children, by = c("Postcode","Year"))
# Additional variables per Postcode
combined <- combined %>%
mutate(Parents = Fulltime+Parttime+Away+Unemployed+NotInLF+Unstated) %>%
mutate(Children = LDCAge+OSHCAge+OlderAge)
#function that if postcode a aligns with postcode b and census date
# Plan is for a combined data set for each post code number of services(with different types) number of places (with different types), proportion of each employment type, labour force participation in each year (and perhaps some postcode fixed effects about number of children in each postcode at a given cross section)
# Columns - Postcode, Year(Census), Fulltime, Parttime, Away, Unemployed, NotinLF, Unstated, LDC, With School, StandAlone, OSHCAfter, OSHCBefore, OSHCVacation, 0,1,2,3,4,5,6,7,8,9,10,11,12, 0-5, 6-12, Average Household Income, Unemployment rate?,
# for every service find matching postcode, if service was running by 2011 add the service types and places to 2011, 2016 and 2021, if service was running by 2016 add the service to 2016 and 2021, if service was run by 2021 add service to 2021
View(summary_ccspc)
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021) %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(Places = ifelse(is.na(Places),0,Places))
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021) %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(Places = ifelse(is.na(Places),0,Places)) %>%
mutate(LDCPlaces = Places*LDC) %>%
mutate(WithSchoolPlaces = Places*WithSchool) %>%
mutate(StandAlonePlaces = Places*StandAlone) %>%
mutate(OSHCAfterPlaces = Places*OSHCAfter) %>%
mutate(OSHCBeforePlaces = Places*OSHCBefore) %>%
mutate(OSHCVacationPlaces = Places*OSHCVacation)
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021) %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(Places = ifelse(is.na(Places),0,Places)) %>%
mutate(LDCPlaces = Places*LDC) %>%
mutate(WithSchoolPlaces = Places*WithSchool) %>%
mutate(StandAlonePlaces = Places*StandAlone) %>%
mutate(OSHCAfterPlaces = Places*OSHCAfter) %>%
mutate(OSHCBeforePlaces = Places*OSHCBefore) %>%
mutate(OSHCVacationPlaces = Places*OSHCVacation)
summary_ccspc <- ccspc %>%
group_by(Postcode, Year) %>%
summarise(
TtlPlaces = sum(Places),
TtlLDCPlaces = sum(LDCPlaces),
TtlWithSchoolPlaces = sum(WithSchool),
TtlStandAlonePlaces = sum(StandAlonePlaces),
TtlOSHCAfterPlaces = sum(OSHCAfterPlaces),
TtlOSHCBeforePlaces = sum(OSHCBeforePlaces),
TtlOSHCVacationPlaces = sum(OSHCVacationPlaces),
TtlLDC = sum(LDC),
TtlWithSchool = sum(WithSchool),
TtlStandAlone = sum(StandAlone),
TtlOSHCAfter = sum(OSHCAfter),
TtlOSHCBefore = sum(OSHCBefore),
TtlOSHCVacation = sum(OSHCVacation)
)
View(combined)
left_join(combined, summary_ccspc, by = c(PostCode, Year))
left_join(combined, summary_ccspc, by = c(Postcode, Year))
left_join(combined, summary_ccspc, by = c("Postcode", "Year"))
summary_ccspc <- factor(summaryccspc$Year)
summary_ccspc <- factor(summary_ccspc$Year)
left_join(combined, summary_ccspc, by = c("Postcode", "Year"))
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021) %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(Places = ifelse(is.na(Places),0,Places)) %>%
mutate(LDCPlaces = Places*LDC) %>%
mutate(WithSchoolPlaces = Places*WithSchool) %>%
mutate(StandAlonePlaces = Places*StandAlone) %>%
mutate(OSHCAfterPlaces = Places*OSHCAfter) %>%
mutate(OSHCBeforePlaces = Places*OSHCBefore) %>%
mutate(OSHCVacationPlaces = Places*OSHCVacation)
summary_ccspc <- ccspc %>%
group_by(Postcode, Year) %>%
summarise(
TtlPlaces = sum(Places),
TtlLDCPlaces = sum(LDCPlaces),
TtlWithSchoolPlaces = sum(WithSchool),
TtlStandAlonePlaces = sum(StandAlonePlaces),
TtlOSHCAfterPlaces = sum(OSHCAfterPlaces),
TtlOSHCBeforePlaces = sum(OSHCBeforePlaces),
TtlOSHCVacationPlaces = sum(OSHCVacationPlaces),
TtlLDC = sum(LDC),
TtlWithSchool = sum(WithSchool),b
TtlStandAlone = sum(StandAlone),
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021) %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(Places = ifelse(is.na(Places),0,Places)) %>%
mutate(LDCPlaces = Places*LDC) %>%
mutate(WithSchoolPlaces = Places*WithSchool) %>%
mutate(StandAlonePlaces = Places*StandAlone) %>%
mutate(OSHCAfterPlaces = Places*OSHCAfter) %>%
mutate(OSHCBeforePlaces = Places*OSHCBefore) %>%
mutate(OSHCVacationPlaces = Places*OSHCVacation)
summary_ccspc <- ccspc %>%
group_by(Postcode, Year) %>%
summarise(
TtlPlaces = sum(Places),
TtlLDCPlaces = sum(LDCPlaces),
TtlWithSchoolPlaces = sum(WithSchool),
TtlStandAlonePlaces = sum(StandAlonePlaces),
TtlOSHCAfterPlaces = sum(OSHCAfterPlaces),
TtlOSHCBeforePlaces = sum(OSHCBeforePlaces),
TtlOSHCVacationPlaces = sum(OSHCVacationPlaces),
TtlLDC = sum(LDC),
TtlWithSchool = sum(WithSchool),
TtlStandAlone = sum(StandAlone),
TtlOSHCAfter = sum(OSHCAfter),
TtlOSHCBefore = sum(OSHCBefore),
TtlOSHCVacation = sum(OSHCVacation)
)
print(summary_ccspc)
summary_ccspc <- summary_ccspc %>%
mutate(Year = factor(Year))
left_join(combined, summary_ccspc, by = c("Postcode", "Year"))
# Additional variables per Postcode
combined <- combined %>%
mutate(Parents = Fulltime+Parttime+Away+Unemployed+NotInLF+Unstated) %>%
mutate(Children = LDCAge+OSHCAge+OlderAge) %>%
mutate(Year = factor(Year))
left_join(combined, summary_ccspc, by = c("Postcode", "Year"))
# Reading and joining ____ date
providers <- read_csv("Approved-providers-au-export.csv")
services <- read_csv("Education-services-au-export.csv")
temp <- left_join(services,providers,by = "Provider Approval Number")
# Selecting Variables of interest
vars <- c("ServiceApprovalNumber", "Provider Approval Number", "ServiceName","ServiceAddress","Suburb.x","State.x","Postcode.x","NumberOfApprovedPlaces","ServiceApprovalGrantedDate", "Date Approval Granted","Long Day Care", "Preschool/Kindergarten - Part of a School", "Preschool/Kindergarten - Stand alone", "Outside school Hours Care - After School", "Outside school Hours Care - Before School", "Outside school Hours Care - Vacation Care")
ccs <- select(temp, all_of(vars))
# Shortening names for ease of use
ccs <- ccs %>% rename(Suburb = "Suburb.x") %>% rename(State = "State.x") %>% rename(Postcode = "Postcode.x") %>% rename(Places = "NumberOfApprovedPlaces") %>% rename(ProviderDate = "Date Approval Granted") %>% rename(ServiceDate = "ServiceApprovalGrantedDate") %>% rename(LDC = "Long Day Care") %>% rename(WithSchool = "Preschool/Kindergarten - Part of a School") %>% rename(StandAlone= "Preschool/Kindergarten - Stand alone") %>% rename(OSHCAfter = "Outside school Hours Care - After School") %>% rename(OSHCBefore = "Outside school Hours Care - Before School") %>% rename(OSHCVacation = "Outside school Hours Care - Vacation Care")
# Converting to dummy variables and lubridate formats
ccs = ccs %>%
mutate(LDC = ifelse(ccs$LDC == 'Yes',1,0)) %>%
mutate(WithSchool = ifelse(ccs$WithSchool == 'Yes',1,0)) %>%
mutate(StandAlone = ifelse(ccs$StandAlone == 'Yes',1,0)) %>%
mutate(OSHCAfter = ifelse(ccs$OSHCAfter == 'Yes',1,0)) %>%
mutate(OSHCBefore = ifelse(ccs$OSHCBefore == 'Yes',1,0)) %>%
mutate(OSHCVacation = ifelse(ccs$OSHCVacation == 'Yes',1,0)) %>%
mutate(ServiceDate = dmy(ccs$ServiceDate)) %>%
mutate(ProviderDate = dmy(ccs$ProviderDate))
# Selecting Analysis variables of Childcare Providers
vars <- c("Postcode", "Places", "ServiceDate", "LDC", "WithSchool", "StandAlone","OSHCAfter","OSHCBefore","OSHCVacation")
ccspc <- select(ccs, all_of(vars))
# Establishing census dates
censusdate2021 <- dmy("10/08/2021")
censusdate2016 <- dmy("09/08/2016")
directorydate <- dmy("01/01/2012")
# Filtering for services available before 2021 Census
ccspc <- ccspc %>%
filter(ServiceDate<censusdate2021)
# Categorizing services introduced by 2016 and those after
bins <- c(0,1,2,3)
labels <- c("2021", "2016", "2011")
ccspc <- ccspc %>%
mutate(Census2011 = ifelse(ServiceDate<=directorydate,1,0)) %>%
mutate(Census2016 = ifelse(ServiceDate<censusdate2016,1,0)) %>%
mutate(Census2021 = ifelse(ServiceDate<censusdate2021,1,0)) %>%
mutate(Census = Census2011+Census2016+Census2021) %>%
mutate(Year = cut(Census,breaks = bins, labels = labels, right = TRUE)) %>%
mutate(Places = ifelse(is.na(Places),0,Places)) %>%
mutate(LDCPlaces = Places*LDC) %>%
mutate(WithSchoolPlaces = Places*WithSchool) %>%
mutate(StandAlonePlaces = Places*StandAlone) %>%
mutate(OSHCAfterPlaces = Places*OSHCAfter) %>%
mutate(OSHCBeforePlaces = Places*OSHCBefore) %>%
mutate(OSHCVacationPlaces = Places*OSHCVacation)
summary_ccspc <- ccspc %>%
group_by(Postcode, Year) %>%
summarise(
TtlPlaces = sum(Places),
TtlLDCPlaces = sum(LDCPlaces),
TtlWithSchoolPlaces = sum(WithSchool),
TtlStandAlonePlaces = sum(StandAlonePlaces),
TtlOSHCAfterPlaces = sum(OSHCAfterPlaces),
TtlOSHCBeforePlaces = sum(OSHCBeforePlaces),
TtlOSHCVacationPlaces = sum(OSHCVacationPlaces),
TtlLDC = sum(LDC),
TtlWithSchool = sum(WithSchool),
TtlStandAlone = sum(StandAlone),
TtlOSHCAfter = sum(OSHCAfter),
TtlOSHCBefore = sum(OSHCBefore),
TtlOSHCVacation = sum(OSHCVacation)
)
print(summary_ccspc)
summary_ccspc <- summary_ccspc %>%
mutate(Year = factor(Year))
summary(ccs$Places)
# Reading and adding variables for Census Data
employment <- read_csv("familyemployment.csv")
employment <- employment %>%
mutate(Fulltime = (ftft*2)+(ftpt)+(ftaw)+(ftun)+(ftnotlf)+(ftunstated)+(ft)) %>%
mutate(Parttime = (ptpt*2)+(ftpt)+(ptaw)+(ptun)+(ptnotlf)+(ptunstated)+(pt)) %>%
mutate(Away = (awaw*2)+ftaw+ptaw+awun+awnotlf+awunstated+aw) %>%
mutate(Unemployed = (unun*2)+ftun+ptun+awun+unnotlf+ununstated+un) %>%
mutate(NotInLF = (notlfnotlf*2)+ftnotlf+ptnotlf+unnotlf+awnotlf+notlfunstated+notlf) %>%
mutate(Unstated = (unstatedunstated*2)+ftunstated+ptunstated+ununstated+awunstated+notlfunstated+unstated) %>%
mutate(Postcode = str_remove(Postcode, ",.*")) %>% # Deletes everything after comma (NSW, VIC etc.)
mutate(Postcode = str_remove(Postcode, " .*")) # Deletes everything after a space ( crosses QLD/NSW)
temp <- read.csv("children.csv")
temp <- temp %>%
mutate(Postcode = str_remove(Postcode, ",.*")) %>% # Deletes everything after comma (NSW, VIC etc.)
mutate(Postcode = str_remove(Postcode, " .*")) %>% # Deletes everything after a space ( crosses QLD/NSW)
mutate(LDCAge = age0+age1+age2+age3+age4+age5) %>%
mutate(PreschoolAge = age3+age4+age5) %>%
mutate(OSHCAge = age6+age7+age8+age9+age10+age11+age12) %>%
mutate(OlderAge = age13+age14+age15)
# Selecting analysis variables
vars <- c("Postcode","Year","Fulltime","Parttime","Away","Unemployed","NotInLF","Unstated")
combined <- select(employment, all_of(vars))
vars <- c("Postcode","Year","LDCAge","PreschoolAge","OSHCAge","OlderAge")
children <- select(temp, all_of(vars))
combined <- left_join(combined, children, by = c("Postcode","Year"))
# Additional variables per Postcode
combined <- combined %>%
mutate(Parents = Fulltime+Parttime+Away+Unemployed+NotInLF+Unstated) %>%
mutate(Children = LDCAge+OSHCAge+OlderAge) %>%
mutate(Year = factor(Year))
combined <- left_join(combined, summary_ccspc, by = c("Postcode", "Year"))
#function that if postcode a aligns with postcode b and census date
# Plan is for a combined data set for each post code number of services(with different types) number of places (with different types), proportion of each employment type, labour force participation in each year (and perhaps some postcode fixed effects about number of children in each postcode at a given cross section)
# Columns - Postcode, Year(Census), Fulltime, Parttime, Away, Unemployed, NotinLF, Unstated, LDC, With School, StandAlone, OSHCAfter, OSHCBefore, OSHCVacation, 0,1,2,3,4,5,6,7,8,9,10,11,12, 0-5, 6-12, Average Household Income, Unemployment rate?,
# for every service find matching postcode, if service was running by 2011 add the service types and places to 2011, 2016 and 2021, if service was running by 2016 add the service to 2016 and 2021, if service was run by 2021 add service to 2021
summary(combined)
pivot_wider(ccsp, Year)
pivot_wider(ccspc, Year)
pivot_wider(ccspc)
View(ccspc)
View(ccspc)
